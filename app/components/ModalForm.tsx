'use client'
import React, { useEffect, useState } from 'react'
export default function ModalForm({ open, onClose }: any){ const [isOpen,setIsOpen]=useState(open||false); useEffect(()=>setIsOpen(open||false),[open])
 const [f,setF]=useState({category:'Заказать трансфер',name:'',phone:'',message:''})
 const ch=(e:any)=>setF({...f,[e.target.name]:e.target.value})
 const submit=async(e:any)=>{e.preventDefault(); try{ await fetch('/api/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({type:'modal',fields:f})}); alert('Спасибо!'); setIsOpen(false); onClose?.() }catch(err){alert('Ошибка')} }
 if(!isOpen) return null
 return (<div className="fixed inset-0 flex items-center justify-center z-50"><div className="absolute inset-0 bg-black/60" onClick={()=>{setIsOpen(false); onClose?.()}} /><div className="bg-[#111] p-6 rounded-2xl w-full max-w-md z-10 border border-gold" onClick={(e)=>e.stopPropagation()}><h3 className="text-xl font-semibold text-gold mb-3">Оставить заявку</h3><form onSubmit={submit} className="space-y-3"><select name="category" value={f.category} onChange={ch} className="w-full p-2 rounded bg-neutral-900"><option>Заказать трансфер</option><option>Стать водителем</option><option>Другое</option></select><input name="name" value={f.name} onChange={ch} placeholder="Имя" className="w-full p-2 rounded bg-neutral-900" required /><input name="phone" value={f.phone} onChange={ch} placeholder="Телефон" className="w-full p-2 rounded bg-neutral-900" required /><textarea name="message" value={f.message} onChange={ch} placeholder="Сообщение" className="w-full p-2 rounded bg-neutral-900" /><div className="flex gap-3 justify-end"><button type="button" onClick={()=>{setIsOpen(false); onClose?.()}} className="px-4 py-2 rounded bg-gray-700">Закрыть</button><button type="submit" className="px-4 py-2 rounded bg-gold text-black">Отправить</button></div></form></div></div>)}
